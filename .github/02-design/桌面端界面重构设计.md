# Stationuli 桌面端界面重构设计

> **文档说明**：基于设备中心架构和参考 UI（Clash Verge），重构 Stationuli 桌面端界面。

## 设计目标

1. **设备中心架构**：以设备为中心，提供快速操作和完整工作台
2. **现代化 UI**：参考 Clash Verge 的设计风格，清晰的信息层次
3. **左侧边栏导航**：清晰的导航结构
4. **卡片式布局**：主内容区域使用卡片式布局
5. **响应式设计**：适配不同窗口大小

---

## 整体布局设计

### 1.1 布局结构

```
┌─────────────────────────────────────────────────────────────┐
│  顶部标题栏                                                  │
│  [Logo] Stationuli  [首页]  [帮助] [通知] [设置]            │
├──────────┬──────────────────────────────────────────────────┤
│          │                                                   │
│  左侧     │  主内容区域                                       │
│  边栏     │  ┌───────────────────────────────────────────┐ │
│  导航     │  │  服务状态卡片                                │ │
│          │  └───────────────────────────────────────────┘ │
│  📋 首页  │  ┌───────────────────────────────────────────┐ │
│  📱 设备  │  │  设备列表卡片                                │ │
│  📊 历史  │  │  - 设备卡片1                                 │ │
│  ⚙️  设置  │  │  - 设备卡片2                                 │ │
│          │  └───────────────────────────────────────────┘ │
│          │  ┌───────────────────────────────────────────┐ │
│          │  │  接收文件卡片                                │ │
│          │  └───────────────────────────────────────────┘ │
│          │                                                   │
│          │                                                   │
└──────────┴──────────────────────────────────────────────────┘
```

### 1.2 布局尺寸

- **左侧边栏**：固定宽度 240px
- **主内容区域**：自适应宽度，最大宽度 1400px，居中显示
- **卡片间距**：16px
- **卡片内边距**：24px

---

## 组件设计

### 2.1 顶部标题栏

**组件**：`TopHeader`

**设计**：

```
┌─────────────────────────────────────────────────────────────┐
│  [Logo] Stationuli    首页     [帮助] [通知] [设置]          │
└─────────────────────────────────────────────────────────────┘
```

**功能**：

- 左侧：应用 Logo 和名称
- 中间：当前页面标题
- 右侧：操作图标（帮助、通知、设置）

### 2.2 左侧边栏导航

**组件**：`Sidebar`

**设计**：

```
┌──────────┐
│ 📋 首页  │ ← 当前选中（蓝色背景）
│ 📱 设备  │
│ 📊 历史  │
│ ⚙️  设置  │
│          │
│          │
│ 流量统计 │
│ ↑ 0 B/s  │
│ ↓ 0 B/s  │
│ 总计: 0  │
└──────────┘
```

**功能**：

- 导航菜单项（首页、设备、历史、设置）
- 底部流量统计（可选，未来功能）

### 2.3 服务状态卡片

**组件**：`ServiceStatusCard`（优化版）

**设计**：

```
┌─────────────────────────────────────────────────────────────┐
│  服务状态                                    🟢 运行中        │
│  ─────────────────────────────────────────────────────────  │
│                                                               │
│  [停止服务]  [添加设备]                                       │
│                                                               │
│  本设备信息                                                   │
│  IP: 192.168.1.100:8080                    [复制]            │
│  其他设备可以使用上述 IP 和端口添加此设备                     │
│                                                               │
│  [生成二维码]                                                 │
└─────────────────────────────────────────────────────────────┘
```

### 2.4 设备列表卡片

**组件**：`DeviceListCard`

**设计**：

```
┌─────────────────────────────────────────────────────────────┐
│  设备列表                                    [+ 添加设备]     │
│  ─────────────────────────────────────────────────────────  │
│                                                               │
│  ┌───────────────────────────────────────────────────────┐  │
│  │  💻 我的MacBook                    🟢 在线            │  │
│  │  192.168.1.100:8080 | Desktop                        │  │
│  │  ───────────────────────────────────────────────────  │  │
│  │  [测试连接]  [文件传输]  [工作台]  [更多 ▼]          │  │
│  │                                                       │  │
│  │  最后连接: 2024-01-15 14:30                          │  │
│  │  总传输量: 1.2 GB | 连接次数: 25                     │  │
│  └───────────────────────────────────────────────────────┘  │
│                                                               │
│  ┌───────────────────────────────────────────────────────┐  │
│  │  📱 我的手机                        ⚪ 离线            │  │
│  │  192.168.1.101:8080 | Mobile                         │  │
│  │  ───────────────────────────────────────────────────  │  │
│  │  [测试连接]  [文件传输]  [工作台]  [更多 ▼]          │  │
│  │                                                       │  │
│  │  最后连接: 2024-01-15 13:20                          │  │
│  │  总传输量: 850 MB | 连接次数: 18                     │  │
│  └───────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

### 2.5 接收文件卡片

**组件**：`ReceivedFilesCard`（优化版）

**设计**：

```
┌─────────────────────────────────────────────────────────────┐
│  接收的文件                                    [打开文件夹]   │
│  ─────────────────────────────────────────────────────────  │
│                                                               │
│  ┌───────────────────────────────────────────────────────┐  │
│  │  📄 document.pdf                                      │  │
│  │  来自: 我的MacBook                                    │  │
│  │  2.5 MB | 2024-01-15 14:30                           │  │
│  │  [预览] [打开] [打开位置] [删除]                      │  │
│  └───────────────────────────────────────────────────────┘  │
│                                                               │
│  暂无接收的文件                                               │
└─────────────────────────────────────────────────────────────┘
```

### 2.6 工作台界面

**组件**：`Workspace`

**设计**：

```
┌─────────────────────────────────────────────────────────────┐
│  工作台 - 我的MacBook                        [关闭]          │
│  ─────────────────────────────────────────────────────────  │
│                                                               │
│  标签页: [文件传输] [设备控制] [消息] [屏幕共享]             │
│                                                               │
│  ┌───────────────────────────────────────────────────────┐  │
│  │  文件传输标签页                                         │  │
│  │  - 发送文件                                             │  │
│  │  - 接收文件列表                                         │  │
│  │  - 传输历史                                             │  │
│  └───────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

---

## 页面设计

### 3.1 首页

**路由**：`/` 或 `/home`

**内容**：

- 服务状态卡片（不包含"添加设备"按钮）
- 接收文件卡片
- 快速入口提示（引导用户前往设备页面）

**设计说明**：

- 首页专注于服务状态和接收文件
- 所有设备相关操作（添加设备、设备列表等）移至"设备"页面
- 符合设备中心架构，设备管理集中在设备页面

### 3.2 设备页面

**路由**：`/devices`

**内容**：

- 设备列表（完整的设备管理）
- 添加设备按钮
- 设备搜索和筛选
- 设备统计信息
- 设备操作（测试连接、文件传输、工作台等）

**设计说明**：

- 设备页面是设备管理的中心
- 所有设备相关操作都在此页面
- 支持搜索和筛选设备
- 显示设备统计信息

### 3.3 历史页面

**路由**：`/history`

**内容**：

- 传输历史
- 设备历史
- 统计信息

### 3.4 设置页面

**路由**：`/settings`

**内容**：

- 应用配置
- 关于信息
- 历史记录管理

---

## 实现方案

### 4.1 路由设计

使用 React Router 进行路由管理：

```typescript
// routes.tsx
import { Routes, Route } from 'react-router-dom';
import HomePage from './pages/HomePage';
import DevicesPage from './pages/DevicesPage';
import HistoryPage from './pages/HistoryPage';
import SettingsPage from './pages/SettingsPage';

export function AppRoutes() {
  return (
    <Routes>
      <Route path="/" element={<HomePage />} />
      <Route path="/devices" element={<DevicesPage />} />
      <Route path="/history" element={<HistoryPage />} />
      <Route path="/settings" element={<SettingsPage />} />
    </Routes>
  );
}
```

### 4.2 布局组件

```typescript
// Layout.tsx
export function Layout({ children }: { children: React.ReactNode }) {
  return (
    <div className="flex h-screen bg-gray-50">
      {/* 左侧边栏 */}
      <Sidebar />

      {/* 主内容区域 */}
      <div className="flex-1 flex flex-col">
        {/* 顶部标题栏 */}
        <TopHeader />

        {/* 页面内容 */}
        <main className="flex-1 overflow-y-auto p-6">
          <div className="max-w-7xl mx-auto space-y-6">
            {children}
          </div>
        </main>
      </div>
    </div>
  );
}
```

### 4.3 状态管理

```typescript
// stores/appStore.ts
import { create } from "zustand";

interface AppState {
  currentPage: "home" | "devices" | "history" | "settings";
  setCurrentPage: (page: AppState["currentPage"]) => void;
}

export const useAppStore = create<AppState>((set) => ({
  currentPage: "home",
  setCurrentPage: (page) => set({ currentPage: page }),
}));
```

---

## 样式设计

### 5.1 颜色方案

- **主色调**：蓝色系（#3B82F6）
- **背景色**：浅灰色（#F9FAFB）
- **卡片背景**：白色（#FFFFFF）
- **文字颜色**：
  - 主要文字：灰色-800（#1F2937）
  - 次要文字：灰色-600（#4B5563）
  - 提示文字：灰色-500（#6B7280）

### 5.2 间距规范

- **卡片间距**：16px（space-y-4）
- **卡片内边距**：24px（p-6）
- **元素间距**：8px、12px、16px、24px

### 5.3 圆角规范

- **卡片圆角**：12px（rounded-xl）
- **按钮圆角**：8px（rounded-lg）
- **小元素圆角**：6px（rounded-md）

---

## 交互设计

### 6.1 导航交互

- 点击侧边栏菜单项，切换页面
- 当前页面高亮显示（蓝色背景）
- 支持键盘快捷键（可选）

### 6.2 设备卡片交互

- 悬停显示阴影效果
- 点击"工作台"打开工作台界面
- 点击"文件传输"快速发送文件
- 右键菜单显示更多操作

### 6.3 工作台交互

- 标签页切换
- 支持快捷键切换标签页
- 关闭按钮关闭工作台

---

## 实现步骤

### 第一阶段：基础布局

1. 创建 Layout 组件（侧边栏 + 主内容区）
2. 创建 TopHeader 组件
3. 创建 Sidebar 组件
4. 实现路由系统

### 第二阶段：页面内容

1. 优化服务状态卡片
2. 优化设备列表卡片
3. 优化接收文件卡片
4. 实现设备页面、历史页面、设置页面

### 第三阶段：工作台

1. 创建工作台组件
2. 实现标签页切换
3. 实现各功能标签页

### 第四阶段：优化

1. 响应式设计
2. 动画效果
3. 性能优化

---

## 总结

通过这次重构，Stationuli 桌面端将：

1. ✅ **清晰的导航结构**：左侧边栏 + 顶部标题栏
2. ✅ **设备中心设计**：设备列表是核心，提供快速操作和工作台
3. ✅ **现代化 UI**：参考 Clash Verge 的设计风格
4. ✅ **卡片式布局**：信息层次清晰
5. ✅ **响应式设计**：适配不同窗口大小

这样的设计既保持了设备中心的优势，又提供了现代化的用户体验。
